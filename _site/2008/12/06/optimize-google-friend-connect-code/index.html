<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>优化Google Friend Connect 嵌入代码</title>
   <meta name="author" content="Tao Zhang" />
   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />
   <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-5531632-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

   </script>
</head>
<body>
<div id="page">
  <p id="breadcrumbs">
<a href="/">主页</a>
&rsaquo; <a href="/archive/">存档</a>
&rsaquo; 优化Google Friend Connect 嵌入代码
</p>
<article>
<header>
<h2><a title="Permalink to 优化Google Friend Connect 嵌入代码" href="http://ztnote.com/2008/12/06/optimize-google-friend-connect-code">优化Google Friend Connect 嵌入代码</a></h2>
<time datetime="2008-12-06" pubdate="pubdate">Dec 06 2008</time>

| <a href="/category#WordPressBackup">WordPressBackup</a>

</header>
<p>加入<a href="http://ztnote.com/2008/12/try-google-friend-connect/" target="_blank">Google Friend Connect</a>(以下简称GFC)后用<a href="https://addons.mozilla.org/en-US/firefox/addon/1843" target="_blank">Firebug</a>测试发现网页加载速度稍慢了一些, 为了不影响网页其他元素的加载, 可以通过把GFC的javascript代码放入footer的方式去除这种影响. 如果网页上同时使用了多个Gadgets, 也可以合并部分相同代码.</p>

<!--more-->


<p>下面这些是Members Gadgets的嵌入代码, 其中红色部分用来显示你的Gadget, 这样我们可以把除此部分的其他代码放入到WordPress的Footer里.</p>

<p><span style="color:#003366;">&lt;!-- Include the Google Friend Connect javascript library. --&gt;
&lt;script type="text/javascript" src="http://www.google.com/friendconnect/script/friendconnect.js"&gt;&lt;/script&gt;</span></p>

<p><span style="color:#003366;">&lt;!-- Define the div tag where the gadget will be inserted. --&gt;
<span style="color:#ff0000;">&lt;div id="div-<strong><em>" style="width:282px;border:1px solid #cccccc;"&gt;&lt;/div&gt;</span>
&lt;!-- Render the gadget into a div. --&gt;
&lt;script type="text/javascript"&gt;
var skin = {};
skin['HEIGHT'] = '385';
skin['BORDER_COLOR'] = '#cccccc';
skin['ENDCAP_BG_COLOR'] = '#e0ecff';
skin['ENDCAP_TEXT_COLOR'] = '#333333';
skin['ENDCAP_LINK_COLOR'] = '#0000cc';
skin['ALTERNATE_BG_COLOR'] = '#ffffff';
skin['CONTENT_BG_COLOR'] = '#ffffff';
skin['CONTENT_LINK_COLOR'] = '#0000cc';
skin['CONTENT_TEXT_COLOR'] = '#333333';
skin['CONTENT_SECONDARY_LINK_COLOR'] = '#7777cc';
skin['CONTENT_SECONDARY_TEXT_COLOR'] = '#666666';
skin['CONTENT_HEADLINE_COLOR'] = '#333333';
google.friendconnect.container.setParentUrl('/' /</em> location of rpc_relay.html and canvas.html */);
google.friendconnect.container.renderMembersGadget(
{ id: 'div-</strong><strong>',
site: '</strong>**'},
skin);
&lt;/script&gt;</span></p>

<p>如果你同时使用了多个Gadgets, 那么可以发现他们的大部分代码都是相似的, 比如显示什么颜色等. 以Wall Gadgets为例, 你也可以只保留红色部分在需要显示的地方:</p>

<p><span style="color:#003366;">&lt;!-- Include the Google Friend Connect javascript library. --&gt;
&lt;script type="text/javascript" src="http://www.google.com/friendconnect/script/friendconnect.js"&gt;&lt;/script&gt;</span></p>

<p>&lt;!-- Define the div tag where the gadget will be inserted. --&gt;
<span style="color:#ff0000;">&lt;div id="div-<strong><strong>" style="width:282px;border:1px solid #cccccc;"&gt;&lt;/div&gt;</span>
&lt;!-- Render the gadget into a div. --&gt;
&lt;script type="text/javascript"&gt;
var skin = {};
skin['BORDER_COLOR'] = '#cccccc';
skin['ENDCAP_BG_COLOR'] = '#e0ecff';
skin['ENDCAP_TEXT_COLOR'] = '#333333';
skin['ENDCAP_LINK_COLOR'] = '#0000cc';
skin['ALTERNATE_BG_COLOR'] = '#ffffff';
skin['CONTENT_BG_COLOR'] = '#ffffff';
skin['CONTENT_LINK_COLOR'] = '#0000cc';
skin['CONTENT_TEXT_COLOR'] = '#333333';
skin['CONTENT_SECONDARY_LINK_COLOR'] = '#7777cc';
skin['CONTENT_SECONDARY_TEXT_COLOR'] = '#666666';
skin['CONTENT_HEADLINE_COLOR'] = '#333333';
<span style="color:#008000;">skin['DEFAULT_COMMENT_TEXT'] = '- add your comment here -';
skin['HEADER_TEXT'] = 'Comments';
skin['POSTS_PER_PAGE'] = '5';
google.friendconnect.container.setParentUrl('/' /<em> location of rpc_relay.html and canvas.html </em>/);
google.friendconnect.container.renderWallGadget(
{ id: '</strong></strong><em>',
site: '</em>***',
'view-params':{"scope":"SITE","features":"video,comment"}
},
skin);</span>
&lt;/script&gt;</p>

<p>从上可以看出, 两段嵌入代码有大量重复. 如果你需要风格一样的Members Gadget和Wall Gadget, 那么仅仅需要将上面代码的绿色部分粘贴到Members Gadget代码的对应位置即可. 完全不需要重复定义颜色和插入两次friendconnect.js.</p>

<footer>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'ztnote'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</footer>
</article>
</div>
<div id="footer">
<p id="followme">Follow me: <a href="https://twitter.com/#!/ztpala">Twitter</a> <a href="https://www.facebook.com/taozhang">Facebook</a> <a href="http://feeds.feedburner.com/pala">RSS</a> | Powered by <a href="https://github.com">GitHub</a> and <a href="https://github.com/mojombo/jekyll">Jekyll</a></p>
</div>
</body>
</html>
